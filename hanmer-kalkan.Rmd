# Hanmer Example

## Prerequisites {-}

```{r message=FALSE}
library("rstan")
library("tidyverse")
library("haven")
```

```{r}
HanmerKalkan <- read_dta("data/Hanmer Kalkan AJPS NES example.dta") %>%
  mutate_if(is.labelled, haven::as_factor) %>%
  filter(exptrnout2 == "Standard") %>%
  mutate(bush_vote = presvote == "Bush",
         ideol7b = as.integer(ideol7b))
```

```{r}
mod_formula <- bush_vote ~ retecon + white + female + age + educ1_7 +
  income + partyid + bushiraq
glm(mod_formula, data = HanmerKalkan)
```

```{r}
X <- lm_preprocess(update(mod_formula, . ~ . - 1), data = HanmerKalkan)
```

```{r}
stan_glm(mod_formula, data = HanmerKalkan)
```
